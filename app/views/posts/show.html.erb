
<div class="container main">
<p id="alert alert-danger"><%= notice  %></p>

<p>
  <strong>Author:</strong>
  <%= @post.author.login  %>
  <br>
  <small><time><%= @post.created_at.to_date.strftime("%d %B, %Y") %></time></small>
  <small> <% if edited?(@post) %>
          <p>edited <%= fa_icon 'edit'%> </p>
          <% end %></small>
</p>

<h1>
  <strong><%= @post.title %></strong>
</h1>

<section class="post-content">
  <%= @post.content %>
</section>
<%=  image_tag(@post.picture) if @post.picture.attached? %>
<br>
<% if @post.author == current_author %>
<%= link_to 'Edit', edit_post_path(@post), class: "badge badge-warning" %> |
<%= link_to 'Back', posts_path, class: "badge badge-warning" %>
<% end %>
<hr>
<h2>Comments</h2>
<% @post.comments.each do  |comment| %>
  <div class="alert alert-light">
    <p><strong><%= comment.author.login %></strong>:<%= comment.body %></p>
    <small> <% if edited?(comment) %>
            <p>edited <%= fa_icon 'edit'%> </p>
            <% end %></small>
      <% if @post.author == current_author  %>
    <p>
      <%= link_to 'Destroy', [comment.post, comment],
               method: :delete,
               data: { confirm: 'Are you sure?' } %>
                   |
      <%= link_to "Edit", edit_post_comment_path(comment.post, comment) %>
    </p>
    <% end %>
  </div>
  <% end  %>
<hr>
<% if current_author == nil %>
  <p>You must be logged in to post comments.</p>
  <% else %>
<%= render 'comments/form' %>
<% end %>
</div>
